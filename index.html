<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>FS/LH + Breakpoints + REM/VW</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..900&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --space-0: 0rem;
        --space-1: 0.0625rem;
        --space-25: 0.125rem;
        --space-50: 0.25rem;
        --space-75: 0.375rem;
        --space-100: 0.5rem;
        --space-125: 0.625rem;
        --space-150: 0.75rem;
        --space-175: 0.875rem;
        --space-200: 1rem;
        --space-225: 1.125rem;
        --space-250: 1.25rem;
        --space-275: 1.375rem;
        --space-300: 1.5rem;
        --space-325: 1.625rem;
        --space-350: 1.75rem;
        --space-375: 1.875rem;
        --space-400: 2rem;
        --space-425: 2.125rem;
        --space-450: 2.25rem;
        --space-475: 2.375rem;
        --space-500: 2.5rem;
        --space-525: 2.625rem;
        --space-550: 2.75rem;
        --space-575: 2.875rem;
        --space-600: 3rem;
        --space-625: 3.125rem;
        --space-650: 3.25rem;
        --space-675: 3.375rem;
        --space-700: 3.5rem;
        --space-725: 3.625rem;
        --space-750: 3.75rem;
        --space-775: 3.875rem;
        --space-800: 4rem;
        --space-825: 4.125rem;
        --space-850: 4.25rem;
        --space-875: 4.375rem;
        --space-900: 4.5rem;
        --space-925: 4.625rem;
        --space-950: 4.75rem;
        --space-975: 4.875rem;
        --space-1000: 5rem;
        --space-1025: 5.125rem;
        --space-1050: 5.25rem;
        --space-1075: 5.375rem;
        --space-1100: 5.5rem;
        --space-1125: 5.625rem;
        --space-1150: 5.75rem;
        --space-1175: 5.875rem;
        --space-1200: 6rem;
        --space-1225: 6.125rem;
        --space-1250: 6.25rem;
        --space-1275: 6.375rem;
        --space-1300: 6.5rem;
        --space-1325: 6.625rem;
        --space-1350: 6.75rem;
        --space-1375: 6.875rem;
        --space-1400: 7rem;
        --space-1425: 7.125rem;
        --space-1450: 7.25rem;
        --space-1475: 7.375rem;
        --space-1500: 7.5rem;
        --space-1525: 7.625rem;
        --space-1550: 7.75rem;
        --space-1575: 7.875rem;
        --space-1600: 8rem;
        --space-1625: 8.125rem;
        --space-1650: 8.25rem;
        --space-1675: 8.375rem;
        --space-1700: 8.5rem;
        --space-1725: 8.625rem;
        --space-1750: 8.75rem;
        --space-1775: 8.875rem;
        --space-1800: 9rem;
        --space-1825: 9.125rem;
        --space-1850: 9.25rem;
        --space-1875: 9.375rem;
        --space-1900: 9.5rem;
        --space-1925: 9.625rem;
        --space-1950: 9.75rem;
        --space-1975: 9.875rem;
        --space-2000: 10rem;
        --space-2250: 11.25rem;
        --space-2500: 12.5rem;
        --space-2750: 13.75rem;
        --space-3000: 15rem;
        --space-3250: 16.25rem;
        --space-3500: 17.5rem;
        --space-3750: 18.75rem;
        --space-4000: 20rem;
      }

      /* ===== Default (≥1728px) ===== */
      :root {
        --fs-display-2: var(--space-675);
        --fs-display-3: var(--space-575);
        --fs-h1: var(--space-500);
        --fs-h2: var(--space-425);
        --fs-h3: var(--space-375);
        --fs-h4: var(--space-325);
        --fs-title: var(--space-350);
        --fs-subtitle: var(--space-300);
        --fs-large: var(--space-275);
        --fs-body: var(--space-250);
        --fs-small: var(--space-225);
        --fs-x-small: var(--space-200);
        --fs-label: var(--space-175);
        --fs-caption: var(--space-150);

        --lh-display-2: var(--space-675);
        --lh-display-3: var(--space-575);
        --lh-h1: var(--space-525);
        --lh-h2: var(--space-450);
        --lh-h3: var(--space-400);
        --lh-h4: var(--space-350);
        --lh-title: var(--space-350);
        --lh-subtitle: var(--space-325);
        --lh-large: var(--space-300);
        --lh-body: var(--space-275);
        --lh-small: var(--space-250);
        --lh-x-small: var(--space-225);
        --lh-label: var(--space-200);
        --lh-caption: var(--space-125);
      }

      /* ===== Tablet (834–1727px) ===== */
      @media (max-width: 1727px) and (min-width: 834px) {
        :root {
          --fs-display-2: var(--space-625);
          --fs-display-3: var(--space-550);
          --fs-h1: var(--space-475);
          --fs-h2: var(--space-400);
          --fs-h3: var(--space-350);
          --fs-h4: var(--space-300);
          --fs-title: var(--space-325);
          --fs-subtitle: var(--space-275);
          --fs-large: var(--space-250);
          --fs-body: var(--space-225);
          --fs-small: var(--space-200);
          --fs-x-small: var(--space-175);
          --fs-label: var(--space-150);
          --fs-caption: var(--space-125);

          --lh-display-2: var(--space-625);
          --lh-display-3: var(--space-550);
          --lh-h1: var(--space-500);
          --lh-h2: var(--space-425);
          --lh-h3: var(--space-375);
          --lh-h4: var(--space-325);
          --lh-title: var(--space-325);
          --lh-subtitle: var(--space-300);
          --lh-large: var(--space-275);
          --lh-body: var(--space-250);
          --lh-small: var(--space-225);
          --lh-x-small: var(--space-200);
          --lh-label: var(--space-150);
          --lh-caption: var(--space-125);
        }

        /* 1) Make #grid flex column on tablet */
        #grid {
          display: flex !important;
          flex-direction: column;
          gap: 12px;
        }
      }

      /* ===== Mobile (380–833px) ===== */
      @media (max-width: 833px) and (min-width: 380px) {
        :root {
          --fs-display-2: var(--space-600);
          --fs-display-3: var(--space-525);
          --fs-h1: var(--space-450);
          --fs-h2: var(--space-375);
          --fs-h3: var(--space-325);
          --fs-h4: var(--space-275);
          --fs-title: var(--space-300);
          --fs-subtitle: var(--space-250);
          --fs-large: var(--space-225);
          --fs-body: var(--space-200);
          --fs-small: var(--space-175);
          --fs-x-small: var(--space-150);
          --fs-label: var(--space-150);
          --fs-caption: var(--space-125);

          --lh-display-2: var(--space-600);
          --lh-display-3: var(--space-525);
          --lh-h1: var(--space-475);
          --lh-h2: var(--space-400);
          --lh-h3: var(--space-350);
          --lh-h4: var(--space-300);
          --lh-title: var(--space-300);
          --lh-subtitle: var(--space-275);
          --lh-large: var(--space-250);
          --lh-body: var(--space-225);
          --lh-small: var(--space-200);
          --lh-x-small: var(--space-175);
          --lh-label: var(--space-125);
          --lh-caption: var(--space-125);
        }
      }

      /* ===== Mobile smaller (≤379px) — 3) clamp(vw) so it doesn’t break =====
   Baseline at 375px width; min at 320px; max = your original rem.
   vw = px/375 * 100. */
      @media (max-width: 379px) {
        html {
          font-size: 5vw;
        }
        :root {
          --fs-display-2: var(--space-600);
          --fs-display-3: var(--space-525);
          --fs-h1: var(--space-450);
          --fs-h2: var(--space-375);
          --fs-h3: var(--space-325);
          --fs-h4: var(--space-275);
          --fs-title: var(--space-300);
          --fs-subtitle: var(--space-250);
          --fs-large: var(--space-225);
          --fs-body: var(--space-200);
          --fs-small: var(--space-175);
          --fs-x-small: var(--space-150);
          --fs-label: var(--space-150);
          --fs-caption: var(--space-125);

          --lh-display-2: var(--space-600);
          --lh-display-3: var(--space-525);
          --lh-h1: var(--space-475);
          --lh-h2: var(--space-400);
          --lh-h3: var(--space-350);
          --lh-h4: var(--space-300);
          --lh-title: var(--space-300);
          --lh-subtitle: var(--space-275);
          --lh-large: var(--space-250);
          --lh-body: var(--space-225);
          --lh-small: var(--space-200);
          --lh-x-small: var(--space-175);
          --lh-label: var(--space-125);
          --lh-caption: var(--space-125);
        }
      }

      /* ===== Page layout ===== */
      * {
        box-sizing: border-box;
      }
      body {
        font-family: "Roboto Flex", system-ui, -apple-system, Segoe UI,
          sans-serif;
        margin: 0;
        padding: 0.5rem;
        background: #f6f7f8;
      }
      h1 {
        margin: 0 0 12px;
        font: 600 18px/1.2 inherit;
      }
      #bp {
        font: 12px/1.4 inherit;
        color: #555;
        margin: 0 0 16px;
      }
      .grid {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }
      .card {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 12px 14px;
      }
      .meta {
        font: 12px/1.2 inherit;
        color: #6b7280;
        margin-bottom: 6px;
      }
      .sample {
        background: #f3f4f6;
        border: 1px dashed #d1d5db;
        border-radius: 8px;
        padding: 10px;
      }
      .code {
        font: 12px/1.25 ui-monospace, SFMono-Regular, Menlo, monospace;
        color: #374151;
        margin-top: 6px;
        white-space: pre-wrap;
      }
      section {
        margin-top: 20px;
      }
      pre {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 12px 14px;
        overflow: auto;
      }
      details summary {
        cursor: pointer;
        margin-bottom: 8px;
      }
    </style>
  </head>
  <body>
    <h1>Font Sizes & Line Heights — Breakpoints Test</h1>
    <div id="bp">
      Viewport: <span id="vw"></span>px — Active: <span id="active"></span>
    </div>
    <div class="grid" id="grid"></div>

    <section>
      <details open>
        <summary>
          <strong>All spacing variables rewritten in rem</strong>
        </summary>
        <pre id="space-rem-list">Loading…</pre>
      </details>
    </section>

    <script>
      /* Pairs to render */
      const pairs = [
        "display-2",
        "display-3",
        "h1",
        "h2",
        "h3",
        "h4",
        "title",
        "subtitle",
        "large",
        "body",
        "small",
        "x-small",
        "label",
        "caption",
      ];

      const grid = document.getElementById("grid");

      function activeBP(w) {
        if (w <= 379) return "Mobile smaller (≤379px)";
        if (w <= 833) return "Mobile (380–833px)";
        if (w <= 1727) return "Tablet (834–1727px)";
        return "Default (≥1728px)";
      }

      function pxToRem(px, base) {
        return (px / base).toFixed(4).replace(/\.?0+$/, "");
      }

      /* Measure a CSS var as a real pixel value by applying it */
      function measurePx(property, varName) {
        const el = document.createElement("div");
        el.style.position = "absolute";
        el.style.visibility = "hidden";
        el.style[property] = `var(${varName})`;
        document.body.appendChild(el);
        const px = parseFloat(getComputedStyle(el)[property]) || 0;
        el.remove();
        return px;
      }

      function render() {
        const w = window.innerWidth;
        document.getElementById("vw").textContent = w;
        document.getElementById("active").textContent = activeBP(w);

        const baseRemPx =
          parseFloat(getComputedStyle(document.documentElement).fontSize) || 16;

        grid.innerHTML = "";
        pairs.forEach((k) => {
          const fsVar = `--fs-${k}`;
          const lhVar = `--lh-${k}`;

          // Make a sample to also reflect inherited context
          const card = document.createElement("div");
          card.className = "card";

          const sample = document.createElement("div");
          sample.className = "sample";
          sample.style.fontSize = `var(${fsVar})`;
          sample.style.lineHeight = `var(${lhVar})`;
          sample.textContent =
            "Я в своем познании настолько преисполнился. 0123456789";

          // After in-DOM, read computed px
          card.innerHTML = `<div class="meta">${k}</div>`;
          card.appendChild(sample);
          grid.appendChild(card);

          const fsPx = parseFloat(getComputedStyle(sample).fontSize);
          const lhPx = parseFloat(getComputedStyle(sample).lineHeight);
          const code = document.createElement("div");
          code.className = "code";
          code.textContent = `font-size: var(${fsVar}) → ${fsPx.toFixed(
            2
          )}px (${pxToRem(fsPx, baseRemPx)}rem)
line-height: var(${lhVar}) → ${lhPx.toFixed(2)}px (${pxToRem(
            lhPx,
            baseRemPx
          )}rem)`;
          card.appendChild(code);
        });

        /* 2) List every spacing variable in rem */
        const ids = (() => {
          const a = [0, 1, 25];
          for (let v = 50; v <= 2000; v += 25) a.push(v);
          for (let v = 2250; v <= 4000; v += 250) a.push(v);
          return a;
        })();

        const lines = [];
        ids.forEach((n) => {
          const name = `--space-${n}`;
          const px = measurePx("width", name); // width is fine; we only need the number
          const rem = pxToRem(px, baseRemPx);
          lines.push(`${name}: ${rem}rem;  /* ${px}px */`);
        });
        document.getElementById("space-rem-list").textContent =
          lines.join("\n");
      }

      render();
      addEventListener("resize", () => requestAnimationFrame(render));
    </script>
  </body>
</html>
