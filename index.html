<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>FS/LH + Breakpoints + REM/VW</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..900&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --space-0: 0rem;
        --space-1: 0.0625rem;
        --space-25: 0.125rem;
        --space-50: 0.25rem;
        --space-75: 0.375rem;
        --space-100: 0.5rem;
        --space-125: 0.625rem;
        --space-150: 0.75rem;
        --space-175: 0.875rem;
        --space-200: 1rem;
        --space-225: 1.125rem;
        --space-250: 1.25rem;
        --space-275: 1.375rem;
        --space-300: 1.5rem;
        --space-325: 1.625rem;
        --space-350: 1.75rem;
        --space-375: 1.875rem;
        --space-400: 2rem;
        --space-425: 2.125rem;
        --space-450: 2.25rem;
        --space-475: 2.375rem;
        --space-500: 2.5rem;
        --space-525: 2.625rem;
        --space-550: 2.75rem;
        --space-575: 2.875rem;
        --space-600: 3rem;
        --space-625: 3.125rem;
        --space-650: 3.25rem;
        --space-675: 3.375rem;
        --space-700: 3.5rem;
        --space-725: 3.625rem;
        --space-750: 3.75rem;
        --space-775: 3.875rem;
        --space-800: 4rem;
        --space-825: 4.125rem;
        --space-850: 4.25rem;
        --space-875: 4.375rem;
        --space-900: 4.5rem;
        --space-925: 4.625rem;
        --space-950: 4.75rem;
        --space-975: 4.875rem;
        --space-1000: 5rem;
        --space-1025: 5.125rem;
        --space-1050: 5.25rem;
        --space-1075: 5.375rem;
        --space-1100: 5.5rem;
        --space-1125: 5.625rem;
        --space-1150: 5.75rem;
        --space-1175: 5.875rem;
        --space-1200: 6rem;
        --space-1225: 6.125rem;
        --space-1250: 6.25rem;
        --space-1275: 6.375rem;
        --space-1300: 6.5rem;
        --space-1325: 6.625rem;
        --space-1350: 6.75rem;
        --space-1375: 6.875rem;
        --space-1400: 7rem;
        --space-1425: 7.125rem;
        --space-1450: 7.25rem;
        --space-1475: 7.375rem;
        --space-1500: 7.5rem;
        --space-1525: 7.625rem;
        --space-1550: 7.75rem;
        --space-1575: 7.875rem;
        --space-1600: 8rem;
        --space-1625: 8.125rem;
        --space-1650: 8.25rem;
        --space-1675: 8.375rem;
        --space-1700: 8.5rem;
        --space-1725: 8.625rem;
        --space-1750: 8.75rem;
        --space-1775: 8.875rem;
        --space-1800: 9rem;
        --space-1825: 9.125rem;
        --space-1850: 9.25rem;
        --space-1875: 9.375rem;
        --space-1900: 9.5rem;
        --space-1925: 9.625rem;
        --space-1950: 9.75rem;
        --space-1975: 9.875rem;
        --space-2000: 10rem;
        --space-2250: 11.25rem;
        --space-2500: 12.5rem;
        --space-2750: 13.75rem;
        --space-3000: 15rem;
        --space-3250: 16.25rem;
        --space-3500: 17.5rem;
        --space-3750: 18.75rem;
        --space-4000: 20rem;
      }

      /* ===== Desktop (1280–1727px) ===== */
      @media (min-width: 1280px) {
        :root {
          --fs-display-2: var(--space-650);
          --fs-display-3: var(--space-550);
          --fs-h1: var(--space-475);
          --fs-h2: var(--space-400);
          --fs-h3: var(--space-350);
          --fs-h4: var(--space-300);
          --fs-title: var(--space-325);
          --fs-subtitle: var(--space-275);
          --fs-large-body: var(--space-250);
          --fs-body: var(--space-225);
          --fs-small-body: var(--space-200);
          --fs-x-small: var(--space-175);
          --fs-label: var(--space-175);
          --fs-caption: var(--space-150);

          --lh-display-2: var(--space-650);
          --lh-display-3: var(--space-550);
          --lh-h1: var(--space-500);
          --lh-h2: var(--space-425);
          --lh-h3: var(--space-375);
          --lh-h4: var(--space-325);
          --lh-title: var(--space-325);
          --lh-subtitle: var(--space-300);
          --lh-large-body: var(--space-275);
          --lh-body: var(--space-250);
          --lh-small-body: var(--space-225);
          --lh-x-small: var(--space-200);
          --lh-label: var(--space-175);
          --lh-caption: var(--space-150);
        }
      }

      /* ===== Default (≥1728px) ===== */
      :root {
        --fs-display-2: var(--space-675);
        --fs-display-3: var(--space-575);
        --fs-h1: var(--space-500);
        --fs-h2: var(--space-425);
        --fs-h3: var(--space-375);
        --fs-h4: var(--space-325);
        --fs-title: var(--space-350);
        --fs-subtitle: var(--space-300);
        --fs-large-body: var(--space-275);
        --fs-body: var(--space-250);
        --fs-small-body: var(--space-225);
        --fs-x-small: var(--space-200);
        --fs-label: var(--space-175);
        --fs-caption: var(--space-150);

        --lh-display-2: var(--space-675);
        --lh-display-3: var(--space-575);
        --lh-h1: var(--space-525);
        --lh-h2: var(--space-450);
        --lh-h3: var(--space-400);
        --lh-h4: var(--space-350);
        --lh-title: var(--space-350);
        --lh-subtitle: var(--space-325);
        --lh-large-body: var(--space-300);
        --lh-body: var(--space-275);
        --lh-small-body: var(--space-250);
        --lh-x-small: var(--space-225);
        --lh-label: var(--space-200);
        --lh-caption: var(--space-150);
      }

      /* ===== Tablet (834–1727px) ===== */
      @media (max-width: 1279px) and (min-width: 834px) {
        :root {
          --fs-display-2: var(--space-625);
          --fs-display-3: var(--space-550);
          --fs-h1: var(--space-475);
          --fs-h2: var(--space-400);
          --fs-h3: var(--space-350);
          --fs-h4: var(--space-300);
          --fs-title: var(--space-325);
          --fs-subtitle: var(--space-275);
          --fs-large-body: var(--space-250);
          --fs-body: var(--space-225);
          --fs-small-body: var(--space-200);
          --fs-x-small: var(--space-175);
          --fs-label: var(--space-175);
          --fs-caption: var(--space-150);

          --lh-display-2: var(--space-625);
          --lh-display-3: var(--space-550);
          --lh-h1: var(--space-500);
          --lh-h2: var(--space-425);
          --lh-h3: var(--space-375);
          --lh-h4: var(--space-325);
          --lh-title: var(--space-325);
          --lh-subtitle: var(--space-300);
          --lh-large-body: var(--space-275);
          --lh-body: var(--space-250);
          --lh-small-body: var(--space-225);
          --lh-x-small: var(--space-200);
          --lh-label: var(--space-175);
          --lh-caption: var(--space-150);
        }

        /* 1) Make #grid flex column on tablet */
        #grid {
          display: flex !important;
          flex-direction: column;
          gap: 12px;
        }
      }

      /* ===== Mobile (380–833px) ===== */
      @media (max-width: 833px) and (min-width: 380px) {
        :root {
          --fs-display-2: var(--space-600);
          --fs-display-3: var(--space-525);
          --fs-h1: var(--space-450);
          --fs-h2: var(--space-375);
          --fs-h3: var(--space-325);
          --fs-h4: var(--space-275);
          --fs-title: var(--space-300);
          --fs-subtitle: var(--space-250);
          --fs-large-body: var(--space-225);
          --fs-body: var(--space-200);
          --fs-small-body: var(--space-175);
          --fs-x-small: var(--space-150);
          --fs-label: var(--space-150);
          --fs-caption: var(--space-125);

          --lh-display-2: var(--space-600);
          --lh-display-3: var(--space-525);
          --lh-h1: var(--space-475);
          --lh-h2: var(--space-400);
          --lh-h3: var(--space-350);
          --lh-h4: var(--space-300);
          --lh-title: var(--space-300);
          --lh-subtitle: var(--space-275);
          --lh-large-body: var(--space-250);
          --lh-body: var(--space-225);
          --lh-small-body: var(--space-200);
          --lh-x-small: var(--space-175);
          --lh-label: var(--space-150);
          --lh-caption: var(--space-125);
        }
      }

      /* ===== Mobile smaller (≤379px) — 3) clamp(vw) so it doesn’t break =====
   Baseline at 375px width; min at 320px; max = your original rem.
   vw = px/375 * 100. */
      @media (max-width: 379px) {
        html {
          font-size: 5vw;
        }
        :root {
          --fs-display-2: var(--space-600);
          --fs-display-3: var(--space-525);
          --fs-h1: var(--space-450);
          --fs-h2: var(--space-375);
          --fs-h3: var(--space-325);
          --fs-h4: var(--space-275);
          --fs-title: var(--space-300);
          --fs-subtitle: var(--space-250);
          --fs-large-body: var(--space-225);
          --fs-body: var(--space-200);
          --fs-small-body: var(--space-175);
          --fs-x-small: var(--space-150);
          --fs-label: var(--space-150);
          --fs-caption: var(--space-125);

          --lh-display-2: var(--space-600);
          --lh-display-3: var(--space-525);
          --lh-h1: var(--space-475);
          --lh-h2: var(--space-400);
          --lh-h3: var(--space-350);
          --lh-h4: var(--space-300);
          --lh-title: var(--space-300);
          --lh-subtitle: var(--space-275);
          --lh-large-body: var(--space-250);
          --lh-body: var(--space-225);
          --lh-small-body: var(--space-200);
          --lh-x-small: var(--space-175);
          --lh-label: var(--space-150);
          --lh-caption: var(--space-125);
        }
      }

      /* ===== Page layout ===== */
      * {
        box-sizing: border-box;
      }
      body {
        font-family: "Roboto Flex", system-ui, -apple-system, Segoe UI,
          sans-serif;
        margin: 0;
        padding: 0.5rem;
        background: #f6f7f8;
      }
      h1 {
        margin: 0 0 12px;
        font: 600 18px/1.2 inherit;
      }
      #bp {
        font: 12px/1.4 inherit;
        color: #555;
        margin: 0 0 16px;
      }
      .grid {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }
      .card {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 12px 14px;
      }
      .meta {
        font: 12px/1.2 inherit;
        color: #6b7280;
        margin-bottom: 6px;
      }
      .sample {
        background: #f3f4f6;
        border: 1px dashed #d1d5db;
        border-radius: 8px;
        padding: 10px;
      }
      .code {
        font: 12px/1.25 ui-monospace, SFMono-Regular, Menlo, monospace;
        color: #374151;
        margin-top: 6px;
        white-space: pre-wrap;
      }
      section {
        margin-top: 20px;
      }
      pre {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 12px 14px;
        overflow: auto;
      }
      details summary {
        cursor: pointer;
        margin-bottom: 8px;
      }
    </style>
  </head>
  <body>
    <h1>Font Sizes & Line Heights — Breakpoints Test</h1>
    <div id="bp">
      Viewport: <span id="vw"></span>px — Active: <span id="active"></span>
    </div>
    <div class="grid" id="grid"></div>

    <section>
      <details open>
        <summary>
          <strong>All spacing variables rewritten in rem</strong>
        </summary>
        <pre id="space-rem-list">Loading…</pre>
      </details>
    </section>

    <section>
      <details open>
        <summary>
          <strong>Color Palette Test</strong>
        </summary>
        <div id="color-palette-test"></div>
      </details>
    </section>

    <section>
      <details open>
        <summary>
          <strong>Text Color Test</strong>
        </summary>
        <div id="text-color-test"></div>
      </details>
    </section>

    <script>
      /* Pairs to render */
      const pairs = [
        "display-2",
        "display-3",
        "h1",
        "h2",
        "h3",
        "h4",
        "title",
        "subtitle",
        "large-body",
        "body",
        "small-body",
        "x-small",
        "label",
        "caption",
      ];

      const grid = document.getElementById("grid");

      function activeBP(w) {
        if (w <= 379) return "Mobile smaller (≤379px)";
        if (w <= 833) return "Mobile (380–833px)";
        if (w <= 1727) return "Tablet (834–1727px)";
        return "Default (≥1728px)";
      }

      function pxToRem(px, base) {
        return (px / base).toFixed(4).replace(/\.?0+$/, "");
      }

      /* Measure a CSS var as a real pixel value by applying it */
      function measurePx(property, varName) {
        const el = document.createElement("div");
        el.style.position = "absolute";
        el.style.visibility = "hidden";
        el.style[property] = `var(${varName})`;
        document.body.appendChild(el);
        const px = parseFloat(getComputedStyle(el)[property]) || 0;
        el.remove();
        return px;
      }

      function render() {
        const w = window.innerWidth;
        document.getElementById("vw").textContent = w;
        document.getElementById("active").textContent = activeBP(w);

        const baseRemPx =
          parseFloat(getComputedStyle(document.documentElement).fontSize) || 16;

        grid.innerHTML = "";
        pairs.forEach((k) => {
          const fsVar = `--fs-${k}`;
          const lhVar = `--lh-${k}`;

          // Make a sample to also reflect inherited context
          const card = document.createElement("div");
          card.className = "card";

          const sample = document.createElement("div");
          sample.className = "sample";
          sample.style.fontSize = `var(${fsVar})`;
          sample.style.lineHeight = `var(${lhVar})`;
          if (k === "body") {
            sample.textContent =
              "Я в своем познании настолько преисполнился, что я как будто бы уже сто триллионов миллиардов лет проживаю на триллионах и триллионах таких же планет, как эта Земля, мне этот мир абсолютно понятен, и я здесь ищу только одного - покоя, умиротворения и вот этой гармонии, от слияния с бесконечно вечным, от созерцания великого фрактального подобия и от вот этого замечательного всеединства существа, бесконечно вечного, куда ни посмотри, хоть вглубь - бесконечно малое, хоть ввысь - бесконечное большое, понимаешь? 0123456789";
          } else {
            sample.textContent =
              "Я в своем познании настолько преисполнился. 0123456789";
          }

          // After in-DOM, read computed px
          card.innerHTML = `<div class="meta">${k}</div>`;
          card.appendChild(sample);
          grid.appendChild(card);

          const fsPx = parseFloat(getComputedStyle(sample).fontSize);
          const lhPx = parseFloat(getComputedStyle(sample).lineHeight);
          const code = document.createElement("div");
          code.className = "code";
          code.textContent = `font-size: var(${fsVar}) → ${fsPx.toFixed(
            2
          )}px (${pxToRem(fsPx, baseRemPx)}rem)
line-height: var(${lhVar}) → ${lhPx.toFixed(2)}px (${pxToRem(
            lhPx,
            baseRemPx
          )}rem)`;
          card.appendChild(code);
        });

        /* 2) List every spacing variable in rem */
        const ids = (() => {
          const a = [0, 1, 25];
          for (let v = 50; v <= 2000; v += 25) a.push(v);
          for (let v = 2250; v <= 4000; v += 250) a.push(v);
          return a;
        })();

        const lines = [];
        ids.forEach((n) => {
          const name = `--space-${n}`;
          const px = measurePx("width", name); // width is fine; we only need the number
          const rem = pxToRem(px, baseRemPx);
          lines.push(`${name}: ${rem}rem;  /* ${px}px */`);
        });
        document.getElementById("space-rem-list").textContent =
          lines.join("\n");
      }

      // Color palette data
      const colorGroups = [
        {
          title: "White",
          colors: [
            { name: "--white: #FFFFFFFF", value: "#FFFFFFFF" },
            { name: "--white: #FFFFFFE5", value: "#FFFFFFE5" },
            { name: "--white: #FFFFFFCC", value: "#FFFFFFCC" },
            { name: "--white: #FFFFFFB2", value: "#FFFFFFB2" },
            { name: "--white: #FFFFFF99", value: "#FFFFFF99" },
            { name: "--white: #FFFFFF80", value: "#FFFFFF80" },
            { name: "--white: #FFFFFF66", value: "#FFFFFF66" },
            { name: "--white: #FFFFFF4D", value: "#FFFFFF4D" },
            { name: "--white: #FFFFFF33", value: "#FFFFFF33" },
            { name: "--white: #FFFFFF1A", value: "#FFFFFF1A" },
            { name: "--white: #FFFFFF0D", value: "#FFFFFF0D" },
          ],
        },
        {
          title: "Black",
          colors: [
            { name: "--black-100: #000000FF", value: "#000000FF" },
            { name: "--black-90: #000000E5", value: "#000000E5" },
            { name: "--black-80: #000000CC", value: "#000000CC" },
            { name: "--black-70: #000000B2", value: "#000000B2" },
            { name: "--black-60: #00000099", value: "#00000099" },
            { name: "--black-50: #00000080", value: "#00000080" },
            { name: "--black-40: #00000066", value: "#00000066" },
            { name: "--black-30: #0000004D", value: "#0000004D" },
            { name: "--black-20: #00000033", value: "#00000033" },
            { name: "--black-10: #0000001A", value: "#0000001A" },
            { name: "--black-10: #0000000D", value: "#0000000D" },
            { name: "--black-0: #00000000", value: "#00000000" },
          ],
        },
        {
          title: "Transparent",
          colors: [{ name: "--transparent: #FFFFFF00", value: "#FFFFFF00" }],
        },
        {
          title: "Grey",
          colors: [
            { name: "--grey-50: #FDFDFDFF", value: "#FDFDFDFF" },
            { name: "--grey-100: #FAFAFAFF", value: "#FAFAFAFF" },
            { name: "--grey-200: #F5F5F5FF", value: "#F5F5F5FF" },
            { name: "--grey-300: #EEEEEEFF", value: "#EEEEEEFF" },
            { name: "--grey-400: #DEDEDEFF", value: "#DEDEDEFF" },
            { name: "--grey-500: #C0C0C0FF", value: "#C0C0C0FF" },
            { name: "--grey-600: #A0A0A0FF", value: "#A0A0A0FF" },
            { name: "--grey-700: #808080FF", value: "#808080FF" },
            { name: "--grey-800: #606060FF", value: "#606060FF" },
            { name: "--grey-900: #404040FF", value: "#404040FF" },
            { name: "--grey-950: #202020FF", value: "#202020FF" },
          ],
        },
        {
          title: "Primitive Slate",
          colors: [
            { name: "--slate-50: #F8FAFCFF", value: "#F8FAFCFF" },
            { name: "--slate-100: #F0F0F6FF", value: "#F0F0F6FF" },
            { name: "--slate-200: #E2E8F0FF", value: "#E2E8F0FF" },
            { name: "--slate-300: #CBD5E1FF", value: "#CBD5E1FF" },
            { name: "--slate-400: #94A3B8FF", value: "#94A3B8FF" },
            { name: "--slate-500: #64748BFF", value: "#64748BFF" },
            { name: "--slate-600: #475569FF", value: "#475569FF" },
            { name: "--slate-700: #334155FF", value: "#334155FF" },
            { name: "--slate-800: #1E293BFF", value: "#1E293BFF" },
            { name: "--slate-900: #0F172AFF", value: "#0F172AFF" },
            { name: "--slate-950: #020617FF", value: "#020617FF" },
          ],
        },
        {
          title: "Blue",
          colors: [
            { name: "--blue-50: #EDF7FF", value: "#EDF7FF" },
            { name: "--blue-100: #D7ECFF", value: "#D7ECFF" },
            { name: "--blue-200: #B7DFFF", value: "#B7DFFF" },
            { name: "--blue-300: #86CCFF", value: "#86CCFF" },
            { name: "--blue-400: #4DAEFF", value: "#4DAEFF" },
            { name: "--blue-500: #248AFF", value: "#248AFF" },
            { name: "--blue-600: #0C6AFF", value: "#0C6AFF" },
            { name: "--blue-700: #0654F5", value: "#0654F5" },
            { name: "--blue-800: #0C42C1", value: "#0C42C1" },
            { name: "--blue-900: #113D97", value: "#113D97" },
            { name: "--blue-950: #0F285C", value: "#0F285C" },
          ],
        },
        {
          title: "Green",
          colors: [
            { name: "--green-50: #F1FCF3", value: "#F1FCF3" },
            { name: "--green-100: #DFF9E5", value: "#DFF9E5" },
            { name: "--green-200: #C0F2CC", value: "#C0F2CC" },
            { name: "--green-300: #8FE6A4", value: "#8FE6A4" },
            { name: "--green-400: #57D175", value: "#57D175" },
            { name: "--green-500: #34C759", value: "#34C759" },
            { name: "--green-600: #22973F", value: "#22973F" },
            { name: "--green-700: #1E7735", value: "#1E7735" },
            { name: "--green-800: #1D5E2E", value: "#1D5E2E" },
            { name: "--green-900: #194E28", value: "#194E28" },
            { name: "--green-950: #082B13", value: "#082B13" },
          ],
        },
        {
          title: "Yellow",
          colors: [
            { name: "--yellow-50: #FFFEE7", value: "#FFFEE7" },
            { name: "--yellow-100: #FFFEC1", value: "#FFFEC1" },
            { name: "--yellow-200: #FFF886", value: "#FFF886" },
            { name: "--yellow-300: #FFEC41", value: "#FFEC41" },
            { name: "--yellow-400: #FFDB0D", value: "#FFDB0D" },
            { name: "--yellow-500: #FFCC00", value: "#FFCC00" },
            { name: "--yellow-600: #D19500", value: "#D19500" },
            { name: "--yellow-700: #A66A02", value: "#A66A02" },
            { name: "--yellow-800: #89530A", value: "#89530A" },
            { name: "--yellow-900: #74430F", value: "#74430F" },
            { name: "--yellow-950: #442304", value: "#442304" },
          ],
        },
        {
          title: "Purple",
          colors: [
            { name: "--purple-50: #FBF5FF", value: "#FBF5FF" },
            { name: "--purple-100: #F6E8FF", value: "#F6E8FF" },
            { name: "--purple-200: #EED4FF", value: "#EED4FF" },
            { name: "--purple-300: #E1B3FF", value: "#E1B3FF" },
            { name: "--purple-400: #CE82FE", value: "#CE82FE" },
            { name: "--purple-500: #BE5AFA", value: "#BE5AFA" },
            { name: "--purple-600: #A830ED", value: "#A830ED" },
            { name: "--purple-700: #921FD1", value: "#921FD1" },
            { name: "--purple-800: #7B1FAA", value: "#7B1FAA" },
            { name: "--purple-900: #651A89", value: "#651A89" },
            { name: "--purple-950: #460566", value: "#460566" },
          ],
        },
        {
          title: "Orange",
          colors: [
            { name: "--orange-50: #FFF8EB", value: "#FFF8EB" },
            { name: "--orange-100: #FFEBC6", value: "#FFEBC6" },
            { name: "--orange-200: #FFD388", value: "#FFD388" },
            { name: "--orange-300: #FFB74A", value: "#FFB74A" },
            { name: "--orange-400: #FFA534", value: "#FFA534" },
            { name: "--orange-500: #FF9707", value: "#FF9707" },
            { name: "--orange-600: #DD5302", value: "#DD5302" },
            { name: "--orange-700: #B73606", value: "#B73606" },
            { name: "--orange-800: #94290C", value: "#94290C" },
            { name: "--orange-900: #7A220D", value: "#7A220D" },
            { name: "--orange-950: #460F02", value: "#460F02" },
          ],
        },
        {
          title: "Red",
          colors: [
            { name: "--red-50: #FFFAF1", value: "#FFFAF1" },
            { name: "--red-100: #FFDFE0", value: "#FFDFE0" },
            { name: "--red-200: #FFC5C6", value: "#FFC5C6" },
            { name: "--red-300: #FF9D9F", value: "#FF9D9F" },
            { name: "--red-400: #FF6468", value: "#FF6468" },
            { name: "--red-500: #FF2D32", value: "#FF2D32" },
            { name: "--red-600: #ED151A", value: "#ED151A" },
            { name: "--red-700: #C80D11", value: "#C80D11" },
            { name: "--red-800: #A50F13", value: "#A50F13" },
            { name: "--red-900: #881417", value: "#881417" },
            { name: "--red-950: #4B0406", value: "#4B0406" },
          ],
        },
      ];

      function renderColorPalette() {
        const palette = document.getElementById("color-palette-test");
        if (!palette) return;
        palette.innerHTML = "";
        colorGroups.forEach((group) => {
          const groupDiv = document.createElement("div");
          groupDiv.style.marginBottom = "2rem";
          const heading = document.createElement("h3");
          heading.textContent = group.title;
          heading.style.font = "600 1.1rem/1.2 inherit";
          heading.style.margin = "1.5rem 0 0.5rem";
          groupDiv.appendChild(heading);

          const row = document.createElement("div");
          row.style.display = "flex";
          row.style.flexWrap = "wrap";
          row.style.gap = "1.5rem";
          row.style.marginBottom = "0.5rem";

          group.colors.forEach((color) => {
            const col = document.createElement("div");
            col.style.display = "flex";
            col.style.flexDirection = "column";
            col.style.alignItems = "center";
            col.style.width = "6rem";

            const square = document.createElement("div");
            square.style.width = "4rem";
            square.style.height = "4rem";
            square.style.borderRadius = "1rem";
            square.style.background = color.value;
            square.style.border = "1px solid #e5e7eb";
            square.style.marginBottom = "0.5rem";
            square.style.boxShadow = "0 1px 2px 0 #0001";

            const label = document.createElement("div");
            label.className = "meta";
            label.style.fontSize = "var(--fs-label, 0.875rem)";
            label.style.textAlign = "center";
            label.textContent = color.name;

            col.appendChild(square);
            col.appendChild(label);
            row.appendChild(col);
          });
          groupDiv.appendChild(row);
          palette.appendChild(groupDiv);
        });
      }

      // Semantic text color variables and their references
      const textColorGroups = [
        {
          title: "Text Primary",
          colors: [
            { name: "--text-primary", ref: "--slate-950" },
            { name: "--text-secondary", ref: "--slate-800" },
            { name: "--text-tertiary", ref: "--slate-600" },
            { name: "--text-quaternary", ref: "--slate-500" },
          ],
        },
        {
          title: "Text Inverted",
          colors: [
            { name: "--text-inverted-primary", ref: "--white: #FFFFFFFF" },
            { name: "--text-inverted-secondary", ref: "--white: #FFFFFFE5" },
            { name: "--text-inverted-tertiary", ref: "--white: #FFFFFFCC" },
            { name: "--text-inverted-quaternary", ref: "--white: #FFFFFF99" },
          ],
        },
        {
          title: "Text Accent",
          colors: [
            { name: "--text-accent-primary", ref: "--blue-700" },
            { name: "--text-accent-secondary", ref: "--blue-500" },
            { name: "--text-accent-tertiary", ref: "--blue-400" },
            { name: "--text-accent-quaternary", ref: "--blue-200" },
          ],
        },
        {
          title: "Text Success",
          colors: [
            { name: "--text-success-primary", ref: "--green-500" },
            { name: "--text-success-secondary", ref: "--green-400" },
            { name: "--text-success-tertiary", ref: "--green-300" },
            { name: "--text-success-quaternary", ref: "--green-200" },
          ],
        },
        {
          title: "Text Caution",
          colors: [
            { name: "--text-caution-primary", ref: "--yellow-500" },
            { name: "--text-caution-secondary", ref: "--yellow-400" },
            { name: "--text-caution-tertiary", ref: "--yellow-300" },
            { name: "--text-caution-quaternary", ref: "--yellow-200" },
          ],
        },
        {
          title: "Text Danger",
          colors: [
            { name: "--text-danger-primary", ref: "--red-800" },
            { name: "--text-danger-secondary", ref: "--red-600" },
            { name: "--text-danger-tertiary", ref: "--red-500" },
            { name: "--text-danger-quaternary", ref: "--red-300" },
          ],
        },
      ];

      // Helper to get color value from colorGroups by ref name
      function getColorValue(ref) {
        // Try to match by exact name in colorGroups
        for (const group of colorGroups) {
          for (const color of group.colors) {
            // For white, match by name prefix
            if (
              ref.startsWith("--white") &&
              color.name.startsWith(ref.split(":")[0])
            )
              return color.value;
            if (color.name.split(":")[0] === ref) return color.value;
          }
        }
        // Fallback: return ref as color (for custom CSS vars)
        return `var(${ref})`;
      }

      function renderTextColorTest() {
        const test = document.getElementById("text-color-test");
        if (!test) return;
        test.innerHTML = "";
        textColorGroups.forEach((group) => {
          const groupDiv = document.createElement("div");
          groupDiv.style.marginBottom = "2rem";
          const heading = document.createElement("h3");
          heading.textContent = group.title;
          heading.style.font = "600 1.1rem/1.2 inherit";
          heading.style.margin = "1.5rem 0 0.5rem";
          groupDiv.appendChild(heading);

          group.colors.forEach((color) => {
            const sample = document.createElement("div");
            sample.style.fontSize = "var(--fs-large-body, 1.375rem)";
            sample.style.fontWeight = "600";
            sample.style.marginBottom = "0.5rem";
            sample.style.color = getColorValue(color.ref);
            sample.textContent = color.name;
            groupDiv.appendChild(sample);
          });
          test.appendChild(groupDiv);
        });
      }

      render();
      renderColorPalette();
      renderTextColorTest();
      addEventListener("resize", () => requestAnimationFrame(render));
    </script>
  </body>
</html>
